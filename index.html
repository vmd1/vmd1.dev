<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z0H0P60H5S"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-Z0H0P60H5S');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - vmd1</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://cdn.848226.xyz/v1/vmd1/media/favicon/favicon-32.ico">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="style.css">
    <!-- Remixicon CDN -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
</head>
<body class="text-gray-300">
    <div id="spotlight"></div>
    <div class="container mx-auto px-4 py-8 max-w-5xl">

        <!-- Header Section -->
        <header class="flex flex-col sm:flex-row justify-between items-center card navbar-card">
            <!-- Logo and name container -->
            <a href="/" class="flex items-center">
                <!-- Logo -->
                <img src="https://cdn.848226.xyz/v1/vmd1/media/logo/logo.svg" alt="vmd1 logo" class="w-12 h-12 mr-4 rounded-full">
                <h1 class="text-4xl font-extrabold text-gray-100">
                    vmd1
                </h1>
            </a>
            <div class="flex items-center space-x-4 mt-4 sm:mt-0">
                <nav class="flex space-x-4">
                    <a href="/" class="text-gray-100 font-bold transition-colors duration-200" title="Home">
                        <i class="ri-home-line text-2xl"></i>
                    </a>
                    <a href="#" id="projects-nav-link" class="text-gray-400 hover:text-gray-100 transition-colors duration-200" title="Projects">
                        <i class="ri-function-line text-2xl"></i>
                    </a>
                </nav>
                <div class="text-gray-600">|</div>
                <div class="flex space-x-4 social-icons">
                    <!-- Social media icons using Remixicon -->
                    <!-- GitHub -->
                    <a href="https://github.com/vmd1" class="text-gray-400 hover:text-gray-100 transition-colors duration-200">
                        <i class="ri-github-fill text-2xl"></i>
                    </a>
                    <!-- Reddit -->
                    <a href="https://www.reddit.com/user/vmd1_" class="text-gray-400 hover:text-gray-100 transition-colors duration-200">
                        <i class="ri-reddit-fill text-2xl"></i>
                    </a>
                    <!-- Instagram -->
                    <a href="https://www.instagram.com/v.md.1" class="text-gray-400 hover:text-gray-100 transition-colors duration-200">
                        <i class="ri-instagram-fill text-2xl"></i>
                    </a>
                    <!-- Email -->
                    <a href="mailto:me@vmd1.dev" class="text-gray-400 hover:text-gray-100 transition-colors duration-200">
                        <i class="ri-mail-fill text-2xl"></i>
                    </a>
                    <!-- Blog -->
                    <a href="https://init0.vmd1.dev" class="text-gray-400 hover:text-gray-100 transition-colors duration-200">
                        <i class="ri-rss-fill text-2xl"></i>
                    </a>
                </div>
            </div>
        </header>

        <!-- About Me Section -->
        <section class="mb-12 card">
            <h2 class="text-2xl font-semibold mb-4 text-gray-100">Hi!</h2>
            <div class="space-y-4 text-gray-400 leading-relaxed">
            <p>I'm Vivaan, a student who‚Äôs super into programming, security, and breaking things (ethically, of course üòÖ). This is my portfolio page where I dump my projects, write-ups, and blog posts about what I‚Äôm learning along the way.</p>
            <p>Right now, I‚Äôm working on a few open-source projects - mostly related to security tools and automation. I love digging into code, figuring out how stuff works under the hood, and then building (or breaking) things just to see what happens. Every bug, every fix, every ‚Äúoh no why is this broken‚Äù moment makes me better.</p>
            <p>Outside of coding, I‚Äôm into gaming and reading. I‚Äôm always looking for ways to challenge myself and pick up new skills, whether that‚Äôs learning a new programming language, exploring cybersecurity challenges, or contributing to communities online.</p>
            <p>This page will keep growing as I add more projects, write more blog posts, and (hopefully) ship some cool stuff that others find useful. Feel free to check out my socials/blog through the links above and reach out if you wanna chat or collab.</p>
        </section>

        <!-- Blog Section -->
        <section class="mb-12 card">
            <h2 class="text-2xl font-semibold mb-4 text-gray-100">Latest Posts</h2>
            <div id="blog-posts" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Blog posts will be dynamically inserted here -->
            </div>
            <div class="text-right mt-4">
                <a href="https://init0.vmd1.dev" class="text-gray-400 hover:text-gray-100 transition-colors duration-200">Show all -></a>
            </div>
        </section>

        <!-- Featured Projects Section -->
        <section class="card">
            <h2 class="text-2xl font-semibold mb-4 text-gray-100">Featured Projects</h2>
            <div id="featured-projects" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Featured projects will be dynamically inserted here -->
            </div>
            <div class="text-right mt-4">
                <button id="show-all-projects" class="text-gray-400 hover:text-gray-100 transition-colors duration-200">Show all -></button>
            </div>
        </section>

    </div>

    <!-- Projects Modal -->
    <div id="projects-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div id="modal-content" class="bg-slate-900 p-8 rounded-lg max-w-4xl w-full max-h-[80vh] overflow-y-auto card">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-gray-100">All Projects</h2>
                <button id="close-modal" class="text-gray-400 hover:text-gray-100">
                    <i class="ri-close-line text-2xl"></i>
                </button>
            </div>
            <div id="all-projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- All projects will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Fetch and display blog posts
        async function fetchBlogPosts() {
            const feedUrl = 'https://init0.vmd1.dev/index.xml';
            const container = document.getElementById('blog-posts');
            try {
                const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedUrl)}`);
                const data = await response.json();
                
                if (data.status === 'ok') {
                    const posts = data.items.slice(0, 6);
                    let postsHtml = '';
                    posts.forEach(post => {
                        // Create a temporary div to parse the description HTML
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = post.description;
                        const descriptionText = tempDiv.textContent || tempDiv.innerText || "";
                        const truncatedDescription = descriptionText.substring(0, 120) + '...';

                        postsHtml += `
                            <a href="${post.link}" target="_blank" rel="noopener noreferrer" class="block p-6 bg-slate-900 rounded-lg hover:bg-slate-800 transition-colors duration-200 card">
                                <h3 class="text-xl font-bold text-gray-100 mb-2">${post.title}</h3>
                                <p class="text-gray-400 text-truncate-4">${truncatedDescription}</p>
                            </a>
                        `;
                    });
                    container.innerHTML = postsHtml;
                } else {
                    container.innerHTML = '<p class="text-gray-500">Failed to load blog posts.</p>';
                }
            } catch (error) {
                console.error('Error fetching blog posts:', error);
                container.innerHTML = '<p class="text-gray-500">Error fetching blog posts.</p>';
            }
        }

        // Fetch and display featured projects
        async function fetchFeaturedProjects() {
            const container = document.getElementById('featured-projects');
            const username = 'vmd1';

            try {
                const [ownedResponse, starredResponse] = await Promise.all([
                    fetch(`https://api.github.com/users/${username}/repos?sort=pushed&per_page=2`),
                    fetch(`https://api.github.com/users/${username}/starred?per_page=2`)
                ]);

                const ownedRepos = await ownedResponse.json();
                const starredRepos = await starredResponse.json();

                const allRepos = [...ownedRepos, ...starredRepos];

                // Simple duplicate removal by repo id
                const uniqueRepos = Array.from(new Set(allRepos.map(a => a.id)))
                    .map(id => {
                        return allRepos.find(a => a.id === id)
                    });

                let projectsHtml = '';
                uniqueRepos.slice(0, 4).forEach(repo => {
                    projectsHtml += `
                        <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="block p-6 bg-slate-900 rounded-lg hover:bg-slate-800 transition-colors duration-200 card">
                            <h3 class="text-xl font-bold text-gray-100 mb-2">${repo.full_name}</h3>
                            <p class="text-gray-400">${repo.description || 'No description available.'}</p>
                        </a>
                    `;
                });
                container.innerHTML = projectsHtml;
            } catch (error) {
                console.error('Error fetching featured projects:', error);
                container.innerHTML = '<p class="text-gray-500">Failed to load featured projects.</p>';
            }
        }

        fetchBlogPosts();
        fetchFeaturedProjects();

        const showAllProjectsButton = document.getElementById('show-all-projects');
        const closeModalButton = document.getElementById('close-modal');
        const projectsModal = document.getElementById('projects-modal');
        const allProjectsContainer = document.getElementById('all-projects-container');
        const projectsNavLink = document.getElementById('projects-nav-link');
        const modalContent = document.getElementById('modal-content');

        function openModal() {
            projectsModal.classList.remove('hidden');
            fetchAllProjects();
        }

        function closeModal() {
            projectsModal.classList.add('hidden');
        }

        showAllProjectsButton.addEventListener('click', openModal);
        projectsNavLink.addEventListener('click', (e) => {
            e.preventDefault();
            openModal();
        });

        closeModalButton.addEventListener('click', closeModal);

        projectsModal.addEventListener('click', (e) => {
            if (e.target === projectsModal) {
                closeModal();
            }
        });

        async function fetchAllProjects() {
            const username = 'vmd1';
            try {
                allProjectsContainer.innerHTML = '<p class="text-gray-500">Loading GitHub repositories...</p>';
                
                const [ownedResponse] = await Promise.all([
                    fetch(`https://api.github.com/users/${username}/repos?sort=pushed`)
                ]);

                const ownedRepos = await ownedResponse.json();

                const allRepos = [...ownedRepos];
                
                // Simple duplicate removal by repo id
                const uniqueRepos = Array.from(new Set(allRepos.map(a => a.id)))
                    .map(id => {
                        return allRepos.find(a => a.id === id)
                    });

                allProjectsContainer.innerHTML = '';

                uniqueRepos.forEach(repo => {
                    const projectCard = `
                        <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="block p-6 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors duration-200 card">
                            <h3 class="text-xl font-bold text-gray-100 mb-2">${repo.full_name}</h3>
                            <p class="text-gray-400 text-sm mb-2">
                                <i class="ri-star-line"></i> ${repo.stargazers_count}
                                <i class="ri-git-repository-commits-line ml-4"></i> ${repo.forks_count}
                            </p>
                            <p class="text-gray-500 text-sm">${repo.description || 'No description available.'}</p>
                        </a>
                    `;
                    allProjectsContainer.innerHTML += projectCard;
                });
            } catch (error) {
                console.error('Error fetching all projects:', error);
                allProjectsContainer.innerHTML = '<p class="text-gray-500">Failed to load projects. Please try again later.</p>';
            }
        }
    </script>
    <script src="spotlight.js"></script>
</body>
</html>
