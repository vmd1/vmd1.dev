{{ define "main" }}
        <!-- About Me Section -->
        <section class="mb-12 card card">
            <h2 class="text-2xl font-semibold mb-4 text-gray-100">Hi!</h2>
            <div class="space-y-4 text-gray-400 leading-relaxed">
            <p>I'm Vivaan, a student who‚Äôs super into programming, security, and breaking things (ethically, of course üòÖ). This is my portfolio page where I dump my projects, write-ups, and blog posts about what I‚Äôm learning along the way.</p>
            <p>Right now, I‚Äôm working on a few open-source projects - mostly related to security tools and automation. I love digging into code, figuring out how stuff works under the hood, and then building (or breaking) things just to see what happens. Every bug, every fix, every ‚Äúoh no why is this broken‚Äù moment makes me better.</p>
            <p>Outside of coding, I‚Äôm into gaming and reading. I‚Äôm always looking for ways to challenge myself and pick up new skills, whether that‚Äôs learning a new programming language, exploring cybersecurity challenges, or contributing to communities online.</p>
            <p>This page will keep growing as I add more projects, write more blog posts, and (hopefully) ship some cool stuff that others find useful. Feel free to check out my socials/blog through the links above and reach out if you wanna chat or collab.</p>
            </div>
        </section>

        <!-- Blog Section -->
        <section class="mb-12 card static-card">
            <h2 class="text-2xl font-semibold mb-4 text-gray-100">Latest Posts</h2>
            <div id="blog-posts" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                {{ $posts := where .Site.RegularPages "Section" "ne" "" }}
                {{ range first 6 $posts }}
                <a href="{{ .RelPermalink }}" class="block p-6 bg-slate-900 rounded-lg hover:bg-slate-800 transition-colors duration-200 card">
                    <h3 class="text-xl font-bold text-gray-100 mb-2">{{ .Title }}</h3>
                    <p class="text-gray-400 text-truncate-4">{{ .Summary | truncate 120 }}</p>
                </a>
                {{ end }}
            </div>
            <div class="text-right mt-4">
                <a href="{{ "posts" | relURL }}" class="text-gray-400 hover:text-gray-100 transition-colors duration-200">Show all -></a>
            </div>
        </section>

        <!-- Featured Projects Section -->
        <section class="card static-card">
            <h2 class="text-2xl font-semibold mb-4 text-gray-100">Featured Projects</h2>
            <div id="featured-projects" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Featured projects will be dynamically inserted here -->
            </div>
            <div class="text-right mt-4">
                <button id="show-all-projects" class="text-gray-400 hover:text-gray-100 transition-colors duration-200">Show all -></button>
            </div>
        </section>

        <script>
        // Fetch and display featured projects
        async function fetchFeaturedProjects() {
            const container = document.getElementById('featured-projects');
            const username = 'vmd1';

            // 3D card tilt effect function (inline)
            function applyTilt(card) {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const { width, height } = rect;
                    
                    const rotateX = (y / height - 0.5) * -20; // Max rotation 10 degrees
                    const rotateY = (x / width - 0.5) * 20;  // Max rotation 10 degrees

                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
                });

                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0)';
                });
            }

            try {
                const [ownedResponse, starredResponse] = await Promise.all([
                    fetch(`https://api.github.com/users/${username}/repos?sort=pushed&per_page=100`),
                    fetch(`https://api.github.com/users/${username}/starred?per_page=100`)
                ]);

                const ownedRepos = await ownedResponse.json();
                const starredRepos = await starredResponse.json();

                // Get the set of starred repo IDs for quick lookup
                const starredIds = new Set(starredRepos.map(repo => repo.id));

                // Filter owned repos to only those that are also starred
                const bothOwnedAndStarred = ownedRepos.filter(repo => starredIds.has(repo.id));

                let projectsHtml = '';
                bothOwnedAndStarred.forEach(repo => {
                    projectsHtml += `
                        <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="block p-6 bg-slate-900 rounded-lg hover:bg-slate-800 transition-colors duration-200 card">
                            <h3 class="text-xl font-bold text-gray-100 mb-2">${repo.full_name}</h3>
                            <p class="text-gray-400">${repo.description || 'No description available.'}</p>
                        </a>
                    `;
                });
                container.innerHTML = projectsHtml;

                // Apply tilt effect to newly added cards
                const newCards = container.querySelectorAll('.card');
                newCards.forEach(card => {
                    applyTilt(card);
                });
            } catch (error) {
                console.error('Error fetching featured projects:', error);
                container.innerHTML = '<p class="text-gray-500">Failed to load featured projects.</p>';
            }
        }

        fetchFeaturedProjects();
        </script>
{{ end }}
